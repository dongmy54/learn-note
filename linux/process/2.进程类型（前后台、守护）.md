### 进程类型
主要有三种普通（前台）进程、后台进程、孤儿进程、守护进程，下面分别说下


#### 前台（普通）进程
通常我们开启的都是前台进程，只要我们终端关闭后，这个进程也会被关闭

#### 后台进程
当我们在一个终端窗口开启一个进程后，如果进程需要一直运行，那么会占用当前窗口，此时我们可以把进程放到后台执行，避免占用当前窗口。

#### 孤儿进程
对于一个后台进程，我们在关闭终端窗口后，这个进程的父进程也就被kill了，这个进程被1号进程接管，此时这个进程变成了孤儿进程。

#### 守护进程（daemon)
一般的守护进程主要是一些系统的服务，需要稳定的长时间的运行，即使重启系统、关闭终端等等都不会受影响。

特点：
1. 一般是`/etc/init.d/`下的一些服务，比如sshd、redis、nginx等
2. 也就是我们通过`systemctl`、`service`命令启动的命令
3. 不受终端关闭、重启系统的影响；即使你kill掉进程，它也会自动重新生成。除非用系统服务命令停止
4. 日志一般位于`/var/log`目录下
5. 如果我们希望服务即使重启也不受影响，我们可以采用以守护进程服务方式运行。


##### 前后台进程如何切换？
一个进程即使切换到后台（&）执行，它的输出默认情况下也会在前台展示，如果前台不想看到这些输出信息，可以写入一个黑洞文件中`/dev/null`
```bash
ctrl + c         # 终止一个前台进程 我们已经非常熟悉

redis-server &           # 直接开启一个后台进程

root@hw-dmy:~# jobs      # jobs 查看当前有哪些后台进程
[1]+  Running                 redis-server & 
# PS: 注意此时如果关闭终端窗口后，会变成孤儿进程——不是后台进程。

root@hw-dmy:~# fg 1     # 将编号为1的后台进程，从后台运行到前台
redis-server                  

# PS: 前台进程移动到后台，需要两步：1. 停止 2. bg
ctrl + z                # 停止redis-server进程
bg 1                    # 将1号进程，再次移到后台
```

##### nohup保证窗口退出后程序仍然能继续正常运行
和守护进程的区别在于，它不能让系统重启、不能手动kill掉进程。
它算的上一种比较方便的让进程不依赖于终端继续运行的方式。

```bash
# 常用方式
nohup redis-server &           # 常用方式,直接以后台方式启动
nohup redis-server > a.log  &  # 启动时候指定日志文件（默认日志文件为 nohup.out)
```

特点：
1. 终端关闭，进程也不会被关闭(它变成了孤儿进程)
2. 输出日志到：当前目录下 `nohup.out`文件
3. 它的强度比守护进程稍弱点，但是许多时候也够用


##### 其它关闭终端后进程仍然保证进程运行的方式
推荐使用 `tmux`


##### 进程文件信息
linux一切都是文件，进程也是文件
- 所有进程都可以在`/proc/进程号/`下查看
- 比如：`cd /proc/6734/` 进 6734进程目录
- 目录下 `cwd` 查看文件路径
- 目录下 `fd`  查看输出信息

![Snip20200406_1.png](https://i.loli.net/2020/04/06/aN1Zwvyk4Ju692l.png)



