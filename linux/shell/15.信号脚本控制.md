#### 信号脚本控制
> 脚本控制主要有两种方式
> - 通过 renice、nice 命令调整cpu占用
> - 通过发送/捕获信号，控制脚本的停止/保留

##### fork炸弹
```bash
.(){.|.&};& 
# 通过不断的创建进程，达到服务器资源耗尽，不接受任何响应
# 处理办法：强制重启服务器
```

##### 信号
> - kill 默认会发送 15 号信号
> - ctrl + c 发送 2 号信号
> - 9号信号，是不可以阻塞的

```bash
# 捕获15号信号
trap 'echo signal 15' 15 

# 打印出脚本进程
echo $$

# 死循环
while :
do
  :
done

# 将不能杀死该进程，会被捕获
# kill xxx
```

##### 脚本加锁
> 如果脚本已经开始执行（比如备份数据）,再次执行脚本将无效

```bash
# /tmp/f.lock 锁文件位置
# /root/a.sh 为命令
flock -xn "/tmp/f.lock" -c "/root/a.sh"

# 上面正在执行时，下面命令将不会再次执行脚本
flock -xn "/tmp/f.lock" -c "/root/a.sh"
```
