#### 概述
在真实场景中性能优化有多方式，比如：从硬件层面提高机器配置、调整数据库配置参数等等；但是最简单、成本最低的优化方式莫过于sql优化，因此这里主要讨论sql优化；

一般而言，查询速度慢大多由于没有索引导致的，但是现实情况，是许多时候我们明明创建了索引，缺没有用到，因此我们需要知道索引失效的场景

#### 索引失效的场景?
```sql
// 1. 索引字段类型和sql语句使用字段类型不同
// 假设这里phone_num 是 string 类型
select * from users where phone_num = 18200456787;

// 2. 字段使用函数/运算/类型转换

// 3. 不符合最左匹配原则
// 假设 组合索引为 city name age
select * from users where name = 'zhangsan' and age = 23;

// 4. like模糊匹配 %位于最左边
select * from users where email like "%43@qq.com";

// 5. or语句前后使用了非索引列
// 假设name有索引 age无索引
select * from users where name = 'zhangsan' or age = 18;

// 6. 组合索引当中存在范围查找时，会导致右侧的字段索引失效
// 假设这里 city,age,name为组合索引 只会用到city age name用不上 
select * from users where city = '张三' and age > 20 and name = '张三';

// 7. != 单列索引时候
// 假设存在单列索引age;ps:如果存在组合索引经测试会用上
select * from users where age != 26;
```

##### sql执行计划查看
```sql 
explain select * from users where name = 'sda';
```


